pipeline {
    agent any

    environment {

        LABS = credentials('labcreds')
        VENV_NAME = 'virtual_retail'
    }

    stages {
        stage('Checkout') {
            steps {
                // Assuming you are using Git. Adjust this if you are using a different version control system.
                script {
                    checkout scm
                }
            }
        }

        stage('build') {
            steps {
                script {
                    sh "virtualenv -p python3 ${VENV_NAME}"
                    sh "cd /bitnami/jenkins/home/workspace/Retail-project_feature1/${VENV_NAME}"
                    sh ". /bin/activate"
                    sh "pip3 install -r req.txt"
                }
                echo 'build successful'
            }
        }

        stage('test') {
            steps {
                echo 'test'
            }
        }

        stage('deploy') {
            steps {
                echo 'Deploy'
            }
        }
    }
}
